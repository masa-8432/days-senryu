<div class="container">

  <div class="row">
    <div class="post">
      <%= render 'posts/item', post: @post %>
      <div class="sub">
        <%= render 'posts/time', post: @post %>
        <%= render 'posts/favorite', post: @post %>
        <%= render 'posts/comment', post: @post %>
      </div>
    </div>
  </div>

  <% if @post.user_id == current_user.id %>
    <%= link_to '編集する', edit_post_path(@post.id) %>
    <%= link_to '投稿を削除', post_path(@post.id), method: :delete, "data-confirm" => "本当に削除しますか？" %>
  <% end %>


<div class="comment">
  <%= form_with(model:[@post, @comment], url: post_post_comments_path(@post.id), method: :post, local: true) do |f| %>
    <%= f.text_area :comment, class:"col-10 form-control", placeholder: "コメントを入力してください" %>
    <%= f.submit '投稿', class:"col-1 btn btn-danger form-control" %>
  <% end %>
</div>

<div class="row">
   <% @post.post_comments.each do |comment| %>

    <div class="col-2">
      <%= link_to user_path(comment.user.name) do %>
        <%= comment.user.name %>
      <% end %>
    </div>
    <div class="col-2">
      <%= comment.updated_at.strftime("%Y-%m-%d %H:%M") %>
    </div>
    <div class="col-6">
      <%= comment.comment %>
    </div>

    <% if comment.user_id == current_user.id %>

    <div class="col-1">
      <%= link_to post_post_comment_path(@post.id,comment.id), method: :delete, "data-confirm" => "本当に削除しますか？" do %>
        <i class="fas fa-edit"></i>
      <% end %>
    </div>

    <div class="col-1">
      <%= link_to post_post_comment_path(@post.id,comment.id), method: :delete, "data-confirm" => "本当に削除しますか？" do %>
        <i class="fas fa-trash-alt"></i>
      <% end %>
    </div>

    <% end %>
  </div>
  </div>